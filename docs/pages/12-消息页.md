# 消息页

## 基本信息

| 项目 | 说明 |
|------|------|
| 页面路径 | `/pages/message/index` |
| 页面标识 | 消息、通知 |
| TabBar 位置 | 是（底部 TabBar 第 3 项「消息」） |

## 页面功能概述

消息中心，展示系统通知、竞价/订单相关消息（如新报价、订单状态变更、评价提醒等），支持未读标记和消息详情跳转。

## 页面布局结构

| 模块 | 说明 |
|------|------|
| 消息列表 | 按时间倒序的消息列表 |
| 消息卡片 | 标题、摘要、时间、未读红点 |
| 消息类型 | 系统通知、竞价通知、订单通知、评价提醒等 |
| 空状态 | 暂无消息时的提示 |

## 功能点详细说明

### 功能点 1：消息列表展示

| 项目 | 说明 |
|------|------|
| 功能 ID | F-MSG-001 |
| 功能描述 | 展示用户消息列表 |
| 操作流程 | 进入页面加载消息 |
| 预期结果 | 按时间倒序展示；支持下拉刷新、分页加载 |
| 消息类型 | 竞价新报价、订单状态变更、评价到期提醒、**奖励金到账**、追评弹窗推送、系统公告等 |

### 功能点 2：未读标记

| 项目 | 说明 |
|------|------|
| 功能 ID | F-MSG-002 |
| 功能描述 | 未读消息显示红点；TabBar 消息角标 |
| 操作流程 | 进入列表或点击消息时标记已读 |
| 预期结果 | 未读有红点；已读后清除；TabBar 显示未读数量 |

### 功能点 3：消息点击跳转

| 项目 | 说明 |
|------|------|
| 功能 ID | F-MSG-003 |
| 功能描述 | 点击消息跳转到关联页面 |
| 跳转规则 | 竞价消息→竞价详情；订单消息→订单详情；评价提醒→评价页等 |
| 预期结果 | 打开对应页面并标记该消息已读 |

### 功能点 4：清空/删除

| 项目 | 说明 |
|------|------|
| 功能 ID | F-MSG-004 |
| 功能描述 | 可选：清空已读、删除单条 |
| 操作流程 | 点击清空或删除 |
| 预期结果 | 更新列表，同步服务端 |

## 页面参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| 无 | - | - | 作为 TabBar 页，通常无参数 |

## 交互逻辑

1. **进入页面**：加载消息列表；如有未读，进入时上报已读（或按产品规则延迟已读）。
2. **点击消息**：跳转关联页；标记已读。
3. **下拉刷新**：重新拉取列表。
4. **上拉加载**：分页加载更多。

## 依赖接口

| 接口 | 方法 | 说明 |
|------|------|------|
| /api/v1/user/messages | GET | 获取消息列表，支持 page、limit |
| /api/v1/user/messages/read | POST | 标记已读（单条或批量） |
| /api/v1/user/messages/unread-count | GET | 获取未读数（用于 TabBar 角标） |

## 图标

- TabBar 消息图标：`images/icon/message.png`、`images/icon/message_active.png`（若不存在需补充，灰色/金色风格与首页、我的图标一致）

## 异常与边界

- 未登录：引导登录或展示空状态。
- 空列表：展示「暂无消息」。
- 消息关联资源已删除：跳转失败时提示「内容已失效」或引导至列表页。
