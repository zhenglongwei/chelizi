# 维修厂详情页

## 基本信息

| 项目 | 说明 |
|------|------|
| 页面路径 | `/pages/shop/detail` |
| 页面标识 | 维修厂详情、门店详情 |
| TabBar 位置 | 否 |

## 页面功能概述

展示维修厂基本信息、资质、历史偏差率、服务项目、评价汇总及评价列表，支持电话、导航、预约等操作。

## 页面布局结构

| 模块 | 说明 |
|------|------|
| 维修厂信息区 | 名称、评分、地址、营业时间、联系电话 |
| 资质认证区 | 营业执照、行业认证、保险合作等 |
| 历史偏差率 | 报价偏差率，体现报价准确度 |
| 服务项目区 | 服务项目及参考价格 |
| 评价汇总区 | 评价数量、内容完整度（与好评率脱钩） |
| 评价列表区 | 用户评价列表，**100% 完整公示**，好评差评一视同仁；差评下方标注「该用户已完成全部评价要求，全额领取对应奖励」 |
| 底部操作栏 | 电话咨询、导航到店、立即预约 |

## 功能点详细说明

### 功能点 1：历史偏差率展示

| 项目 | 说明 |
|------|------|
| 功能 ID | F-SHOP-DETAIL-001 |
| 功能描述 | 展示历史报价偏差率 |
| 计算方式 | 偏差率 = \|实际金额 - 报价金额\| / 报价金额 × 100% |
| 展示规则 | 平均偏差率；偏差率 < 10% 绿色，10–20% 黄色，> 20% 红色 |
| 备注 | 偏差率影响综合评分和报价排序权重 |

### 功能点 2：电话咨询

| 项目 | 说明 |
|------|------|
| 功能 ID | F-SHOP-DETAIL-002 |
| 功能描述 | 拨打维修厂联系电话 |
| 操作流程 | 点击拨号按钮 |
| 预期结果 | 调起系统拨号 |

### 功能点 3：导航到店

| 项目 | 说明 |
|------|------|
| 功能 ID | F-SHOP-DETAIL-003 |
| 功能描述 | 打开地图导航至维修厂 |
| 操作流程 | 点击导航按钮 |
| 预期结果 | 调起微信/腾讯地图导航 |

### 功能点 4：立即预约

| 项目 | 说明 |
|------|------|
| 功能 ID | F-SHOP-DETAIL-004 |
| 功能描述 | 向维修厂发起预约 |
| 操作流程 | 点击预约 → 选择时间/项目（如有）→ 提交 |
| 预期结果 | 提交预约，维修厂收到通知 |
| 备注 | 可与 AI 定损流程结合，或作为独立预约 |

### 功能点 5：收藏

| 项目 | 说明 |
|------|------|
| 功能 ID | F-SHOP-DETAIL-005 |
| 功能描述 | 收藏/取消收藏维修厂 |
| 操作流程 | 点击收藏图标 |
| 预期结果 | 更新收藏状态，并在个人中心「我的收藏」中展示 |

## 页面参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| id | string | 是 | 维修厂 ID（shop_id） |

## 交互逻辑

1. **进入页面**：根据 `id` 加载维修厂详情、服务项目、评价汇总、评价列表。
2. **偏差率**：从接口或计算得到，按规则显示颜色。
3. **评价列表**：分页加载；按「内容完整度优先、发布时间最新」排序，**不设好评优先**；用户可自主切换筛选维度。
4. **底部操作**：电话、导航直接调起系统能力；预约走表单/弹窗流程。

## 依赖接口

| 接口 | 方法 | 说明 |
|------|------|------|
| /api/v1/shops/{id} | GET | 获取维修厂详情 |
| /api/v1/shops/{id}/reviews | GET | 获取评价列表 |

## 异常与边界

- 维修厂不存在：提示并返回上一页。
- 无评价：评价区显示「暂无评价」。
- 无资质：资质区可隐藏或显示「暂无」。
- 高偏差率：按需求文档显示警示标识。
