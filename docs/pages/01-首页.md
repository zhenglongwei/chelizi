# 首页

## 基本信息

| 项目 | 说明 |
|------|------|
| 页面路径 | `/pages/index/index` |
| 页面标识 | 首页、主页 |
| TabBar 位置 | 是（底部 TabBar 第 1 项） |

## 页面功能概述

首页是事故车维修平台的主入口，承载平台核心功能入口、内容展示和快捷导航。用户可快速发起 AI 定损、搜索维修厂、查看附近/优质维修厂推荐。

## 页面布局结构

| 模块 | 说明 |
|------|------|
| 顶部导航栏 | 小程序原生导航栏，标题「事故车维修平台」 |
| 广告区轮播 | 全宽、增高。平台简介 + AI 定损入口（含相机图标，点击进入定损页）+ 2–3 家推荐商家 |
| 搜索栏 | 搜索框，图标 images/icon/search.png |
| 快捷入口 | 4 个图标：钣金喷漆、发动机维修、电路维修、保养服务 |
| 附近维修厂 | 基于位置展示维修厂列表 |
| 底部 TabBar | 首页、定损、我的 |

## 功能点详细说明

### 功能点 1：AI 定损入口

| 项目 | 说明 |
|------|------|
| 功能 ID | F-INDEX-001 |
| 功能描述 | 点击进入 AI 定损页面 |
| 操作流程 | 1. 点击「上传事故照片」大按钮 2. 跳转至 `/pages/damage/upload` |
| 预期结果 | 进入定损页并显示照片上传区域 |
| 备注 | 首次使用显示功能引导；记录点击行为用于数据分析 |

### 功能点 2：搜索栏

| 项目 | 说明 |
|------|------|
| 功能 ID | F-INDEX-002 |
| 功能描述 | 搜索维修厂、车型、维修项目 |
| 操作流程 | 1. 点击搜索框获得焦点 2. 输入关键词 3. 确认搜索 |
| 预期结果 | 跳转至维修厂搜索列表页，展示搜索结果 |
| 交互说明 | 可直接跳转搜索页，或在首页内展示建议词 |

### 功能点 3：快捷入口

| 项目 | 说明 |
|------|------|
| 功能 ID | F-INDEX-003 |
| 功能描述 | 按维修类型快速筛选维修厂 |
| 操作流程 | 点击钣金喷漆、发动机维修、电路维修、保养服务 |
| 预期结果 | 跳转至维修厂列表页，预填对应分类筛选条件 |

### 功能点 4：附近维修厂

| 项目 | 说明 |
|------|------|
| 功能 ID | F-INDEX-004 |
| 功能描述 | 展示附近 5 公里内维修厂 |
| 操作流程 | 进入首页自动加载 |
| 预期结果 | 按距离排序展示，点击可进入维修厂详情页 |
| 依赖 | 需获取用户地理位置权限 |

### 功能点 5：优质推荐

| 项目 | 说明 |
|------|------|
| 功能 ID | F-INDEX-005 |
| 功能描述 | 展示平台认证、高评分维修厂 |
| 操作流程 | 进入首页自动加载 |
| 预期结果 | 展示推荐列表，点击可进入维修厂详情页 |

## 页面参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| 无 | - | - | 首页为默认入口，通常无 URL 参数 |

## 交互逻辑

1. **进入页面**：自动请求用户位置 → 加载轮播图、附近维修厂、优质推荐。
2. **搜索**：点击搜索框 → 跳转 `/pages/search/list`，可带关键词或空。
3. **AI 定损**：点击入口 → 跳转 `/pages/damage/upload`。
4. **快捷入口**：点击分类 → 跳转 `/pages/search/list`，附带分类参数。
5. **维修厂卡片**：点击 → 跳转 `/pages/shop/detail?id={shop_id}`。

## 依赖接口

| 接口 | 方法 | 说明 |
|------|------|------|
| /api/v1/shops/nearby | GET | 获取附近维修厂 |
| /api/v1/shops/recommended | GET | 获取优质推荐（若存在） |
| 轮播图配置 | - | 可能来自配置或接口 |

## 异常与边界

- **无位置**：使用 chooseLocation 选择位置（不依赖 getLocation 授权）。无缓存时展示空状态 +「选择位置」按钮；首次弹窗说明用途；选择后缓存，下拉刷新沿用；支持「重新选择」。
- **附近最大距离**：由后台「系统配置」-「附近维修厂最大距离（km）」控制，默认 50km。
- 网络失败：给出重试入口和错误提示。
- 首次进入：可展示新手指引或弹窗说明核心功能。
